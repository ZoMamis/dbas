function setLinkActive(a){var c=["#"+contactLink,"#"+loginLinkId,"#"+newsLink,"#"+contentLink],b;for(b=0;b<c.length;b++){if(c[b]===a){$(c[b]).addClass("active")}else{$(c[b]).removeClass("active")}}}function jmpToChapter(){$("a[href^=#]").on("click",function(c){try{var a=$(this).attr("href");$("html, body").animate({scrollTop:($(a).offset().top-100)},"slow");c.preventDefault()}catch(b){}})}function goBackToTop(){$(window).scroll(function(){if(jQuery(this).scrollTop()>500){$(".back-to-top").fadeIn("slow");setTimeout(function(){$(".back-to-top").fadeOut("slow")},2500)}else{$(".back-to-top").fadeOut("slow")}});$(".back-to-top").click(function(a){a.preventDefault();$("html, body").animate({scrollTop:0},500);return false})}function changeBackgroundOnScroll(){$(window).scroll(function(){if(jQuery(this).scrollTop()>10){$("#custom-bootstrap-menu").removeClass("navbar-transparent")}else{$("#custom-bootstrap-menu").addClass("navbar-transparent")}})}function displayConfirmationDialog(a,d,c,b){$("#"+popupConfirmDialogId).modal("show");$("#"+popupConfirmDialogId+" h4.modal-title").text(a);$("#"+popupConfirmDialogId+" div.modal-body").html(d);$("#"+popupConfirmDialogAcceptBtn).show().click(function(){$("#"+popupConfirmDialogId).modal("hide");if(b){window.location.href=c}else{c()}});$("#"+popupConfirmDialogRefuseBtn).show().click(function(){$("#"+popupConfirmDialogId).modal("hide")})}function displayConfirmationDialogWithoutCancelAndFunction(a,b){$("#"+popupConfirmDialogId).modal("show");$("#"+popupConfirmDialogId+" h4.modal-title").text(a);$("#"+popupConfirmDialogId+" div.modal-body").html(b);$("#"+popupConfirmDialogAcceptBtn).show().click(function(){$("#"+popupConfirmDialogId).modal("hide")}).removeClass("btn-success");$("#"+popupConfirmDialogRefuseBtn).hide()}function displayConfirmationDialogWithCheckbox(a,e,d,c,b){if(new Helper().isCookieSet(WARNING_CHANGE_DISCUSSION_POPUP)){window.location.href=c}else{$("#"+popupConfirmChecbkoxDialogId).modal("show");$("#"+popupConfirmChecbkoxDialogId+" h4.modal-title").text(a);$("#"+popupConfirmChecbkoxDialogId+" div.modal-body").html(e);$("#"+popupConfirmChecbkoxDialogTextId).text(d);$("#"+popupConfirmChecbkoxDialogAcceptBtn).click(function(){$("#"+popupConfirmChecbkoxDialogId).modal("hide");if($("#"+popupConfirmChecbkoxId).prop("checked")){new Helper().setCookie(WARNING_CHANGE_DISCUSSION_POPUP)}if(b){window.location.href=c}else{c()}});$("#"+popupConfirmChecbkoxDialogRefuseBtn).click(function(){$("#"+popupConfirmChecbkoxDialogId).modal("hide")})}}function setPiwikOptOutLink(b){var a=mainpage+"piwik/index.php?module=CoreAdminHome&action=optOut&idsite=1&language=";if(b==="de"){a+="de"}else{a+="en"}$("#piwik-opt-out-iframe").attr("src",a)}function setEasterEggs(){$("#roundhousekick").click(function(){ajaxRoundhouseKick()});if(window.location.href==mainpage){}}function hideExtraViewsOfLoginPopup(){$("#"+popupLoginWarningMessage).hide();$("#"+popupLoginFailed).hide();$("#"+popupLoginSuccess).hide();$("#"+popupLoginRegistrationSuccess).hide();$("#"+popupLoginRegistrationFailed).hide();$("#"+popupLoginButtonRegister).hide();$("#"+popupLoginButtonLogin).hide();$("#"+popupLoginForgotPasswordBody).hide();$("#"+generatePasswordBodyId).hide()}function prepareLoginRegistrationPopup(){var a=$("#"+popupLoginGeneratePasswordBodyId);hideExtraViewsOfLoginPopup();a.hide();$(".tab-login a").on("click",function(d){d.preventDefault();$(this).parent().addClass("active");$(this).parent().siblings().removeClass("active");var c=$(this).attr("href");$(".tab-content > div").not(c).hide();$(c).fadeIn(600);if($(this).attr("href").indexOf("signup")!=-1){$("#"+popupLoginButtonLogin).hide();$("#"+popupLoginButtonRegister).show()}else{$("#"+popupLoginButtonLogin).show();$("#"+popupLoginButtonRegister).hide()}});$("#"+popupLoginButtonLogin).show().click(function(){ajaxLogin()}).keypress(function(c){if(c.which==13){ajaxRegistration()}});$("#"+popupLoginForgotPasswordText).click(function(){if(a.is(":visible")){a.hide();$("#"+popupLoginForgotPasswordText).text(_t(forgotPassword)+"?")}else{$("#"+popupLoginForgotPasswordBody).show();$("#"+popupLoginForgotPasswordText).text(_t(hidePasswordRequest))}});$("#"+popupLoginGeneratePassword+" > a").click(function(){if(a.is(":visible")){a.hide();$("#"+popupLoginGeneratePassword+" > a span").text(_t(generateSecurePassword))}else{a.show();$("#"+popupLoginGeneratePassword+" > a span").text(_t(hideGenerator))}});$("#"+popupLoginCloseButton).click(function(){hideExtraViewsOfLoginPopup();$("#"+popupLogin).modal("hide");$("#"+popupLoginButtonLogin).show()});$("#"+popupLoginPasswordInputId).keyup(function b(){new PasswordHandler().check_strength($("#"+popupLoginPasswordInputId),$("#"+popupLoginPasswordMeterId),$("#"+popupLoginPasswordStrengthId),$("#"+popupLoginPasswordExtrasId))});$("#"+popupLoginButtonRegister).click(function(){var g=$("#"+popupLoginUserfirstnameInputId).val(),j=$("#"+popupLoginUserlastnameInputId).val(),c=$("#"+popupLoginNickInputId).val(),h=$("#"+popupLoginEmailInputId).val(),l=$("#"+popupLoginPasswordInputId).val(),d=$("#"+popupLoginPasswordconfirmInputId).val(),m="",e,f=[g,j,c,h,l,d],k=[_t(checkFirstname),_t(checkLastname),_t(checkNickname),_t(checkEmail),_t(checkPassword),_t(checkConfirmation),_t(checkPasswordConfirm)];for(e=0;e<f.length;e++){if(!f[e]||/^\s*$/.test(f[e])||0===f[e].length){m=k[e];break}}if(m==""){$("#"+popupLoginWarningMessage).hide();ajaxRegistration()}else{$("#"+popupLoginWarningMessage).fadeIn("slow");$("#"+popupLoginWarningMessageText).text(m)}});$("#"+loginUserId).keypress(function(c){if(c.which==13){ajaxLogin()}});$("#"+loginPwId).keypress(function(c){if(c.which==13){ajaxLogin()}});$("#"+popupLoginUserfirstnameInputId).keypress(function(c){if(c.which==13){ajaxRegistration()}});$("#"+popupLoginUserlastnameInputId).keypress(function(c){if(c.which==13){ajaxRegistration()}});$("#"+popupLoginNickInputId).keypress(function(c){if(c.which==13){ajaxRegistration()}});$("#"+popupLoginEmailInputId).keypress(function(c){if(c.which==13){ajaxRegistration()}});$("#"+popupLoginPasswordconfirmInputId).keypress(function(c){if(c.which==13){ajaxRegistration()}});$("#"+popupLoginButtonRequest).click(function(){ajaxPasswordRequest()})}function ajaxSwitchDisplayLanguage(a){$.ajax({url:"ajax_switch_language",type:"POST",data:{lang:a},dataType:"json",async:true}).done(function c(){location.reload(true);setPiwikOptOutLink(a)}).fail(function b(){alert(_t(languageCouldNotBeSwitched))})}function ajaxLogin(){var a=$("#"+loginUserId).val(),c=$("#"+loginPwId).val(),b=window.location.href;$.ajax({url:"ajax_user_login",type:"POST",data:{user:a,password:c,url:b},dataType:"json",async:true}).done(function e(f){callbackIfDoneForLogin(f)}).fail(function d(f){if(f.status==200){location.reload(true)}else{$("#"+popupLoginFailed).show();$("#"+popupLoginFailed+"-message").text(_t(requestFailed))}})}function ajaxLogout(){var a=window.location.href;$.ajax({url:"ajax_user_logout",type:"POST",data:{url:a},dataType:"json",async:true}).done(function c(d){}).fail(function b(d){if(d.status==200){if(window.location.href.indexOf("settings")!=0){window.location.href=mainpage}else{location.reload()}}else{if(d.status==403){window.location.href=mainpage}}})}function ajaxRegistration(){var e=$("#userfirstname-input").val(),f=$("#userlastname-input").val(),d=$("#nick-input").val(),g=$("#email-input").val(),i=$("#"+popupLoginPasswordInputId).val(),c=$("#"+popupLoginPasswordconfirmInputId).val(),h="";if($("#"+popupLoginInlineRadioGenderN).is(":checked")){h="n"}if($("#"+popupLoginInlineRadioGenderM).is(":checked")){h="m"}if($("#"+popupLoginInlineRadioGenderF).is(":checked")){h="f"}$.ajax({url:"ajax_user_registration",type:"POST",data:{firstname:e,lastname:f,nickname:d,gender:h,email:g,password:i,passwordconfirm:c,lang:getLanguage()},dataType:"json",async:true}).done(function b(j){callbackIfDoneForRegistration(j)}).fail(function a(){$("#"+popupLoginRegistrationFailed).show();$("#"+popupLoginRegistrationFailed+"-message").text(_t(requestFailed))})}function ajaxPasswordRequest(){var a=$("#password-request-email-input").val();$.ajax({url:"ajax_user_password_request",type:"POST",data:{email:a,lang:getLanguage()},dataType:"json",async:true}).done(function c(d){callbackIfDoneForPasswordRequest(d)}).fail(function b(){$("#"+popupLoginRegistrationFailed).show();$("#"+popupLoginRegistrationFailed+"-message").text(_t(requestFailed))})}function ajaxRoundhouseKick(){$.ajax({url:"additional_service",type:"GET",data:{type:"chuck"},global:false,async:true}).done(function a(b){if(b.type=="success"){displayConfirmationDialogWithoutCancelAndFunction("Chuck Norris Fact #"+b.value.id,"<h4>"+b.value.joke+'</h4>\n\n<span style="float:right;">powered by <a href="http://www.icndb.com/">http://www.icndb.com/</a></span>')}})}function ajaxMama(){$.ajax({url:"additional_service",type:"GET",data:{type:"mama"},global:false,async:true}).done(function a(b){displayConfirmationDialogWithoutCancelAndFunction("Yo Mamma","<h4>"+b.joke+'</h4>\n\n<span style="float:right;">powered by <a href="http://yomomma.info/">http://yomomma.info/</a></span>')})}function callbackIfDoneForLogin(a){var b=$.parseJSON(a);if(b.message.length!=0){$("#"+popupLoginFailed).show();$("#"+popupLoginFailed+"-message").text(b.message)}else{$("#"+popupLogin).modal("hide");location.reload()}}function callbackIfDoneForRegistration(a){var b=$.parseJSON(a);if(b.success=="0"){$("#"+popupLoginRegistrationFailed).show();$("#"+popupLoginRegistrationSuccess).hide();$("#"+popupLoginRegistrationFailed+"-message").text(b.message)}else{$("#"+popupLoginRegistrationFailed).hide();$("#"+popupLoginRegistrationSuccess).show();$("#"+popupLoginRegistrationSuccess+"-message").text(b.message)}}function callbackIfDoneForPasswordRequest(a){var b=$.parseJSON(a);if(b.success=="0"){$("#"+popupLoginFailed).show();$("#"+popupLoginSuccess).hide();$("#"+popupLoginFailed+"-message").text(_t(b.message))}else{$("#"+popupLoginForgotPasswordBody).hide();$("#"+popupLoginFailed).hide();$("#"+popupLoginSuccess).show();$("#"+popupLoginSuccess+"-message").text(_t(b.message));$("#"+popupLoginForgotPasswordText).text(_t(forgotPassword)+"?")}}$(document).ready(function(){var a=window.location.href,c=$("#hidden_language").val();jmpToChapter();goBackToTop();setPiwikOptOutLink(c);setEasterEggs();if(a.indexOf(urlContact)!=-1){setLinkActive("#"+contactLink);$("#"+navbarLeft).hide()}else{if(a.indexOf(urlLogin)!=-1){setLinkActive("#"+loginLinkId);$("#"+navbarLeft).hide()}else{if(a.indexOf(urlNews)!=-1){setLinkActive("#"+newsLink);$("#"+navbarLeft).hide()}else{if(a.indexOf(urlContent)!=-1){setLinkActive("#"+contentLink);$("#"+navbarLeft).hide()}else{if(a.indexOf(urlSettings)!=-1||a.indexOf(urlImprint)!=-1||a.indexOf(urlLogout)!=-1){$("#"+navbarLeft).hide()}else{setLinkActive("");$("#"+navbarLeft).show()}}}}}$("#"+translationLinkDe).click(function(){ajaxSwitchDisplayLanguage("de")});$("#"+translationLinkEn).click(function(){ajaxSwitchDisplayLanguage("en")});$("#"+translationLinkDe+" img").click(function(){ajaxSwitchDisplayLanguage("de")});$("#"+translationLinkEn+" img").click(function(){ajaxSwitchDisplayLanguage("en")});$("#"+logoutLinkId).click(function(){ajaxLogout()});prepareLoginRegistrationPopup();$(document).on({ajaxStart:function b(){setTimeout("$('body').addClass('loading')",0)},ajaxStop:function d(){setTimeout("$('body').removeClass('loading')",0)}})});