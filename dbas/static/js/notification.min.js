$(function(){$.each($("#message-space .panel-body"),function a(){replaceHtmlTags($(this))});$.each($("#message-space .panel-title-link"),function a(){$(this).click(function(){var b=$(this).parent().parent().parent().attr("id");if($(this).html().indexOf("<strong")!=-1){sendAjaxForReadMessage(b,this)}})});$.each($("#message-space .glyphicon-trash"),function a(){$(this).off("click").click(function(){$(this).parent().parent().attr("href","");sendAjaxForDeleteMessage($(this).parent().parent().parent().attr("id"))})})});replaceHtmlTags=function(a){var b=a.text();b=b.replace("&lt;strong&gt;","<strong>");b=b.replace("&lt;/strong&gt;","</strong>");b=b.replace("&lt;a","<a");b=b.replace("&lt;/a","</a");b=b.replace("&lt;br&gt;","<br>");a.html(b)};hideInfoSpaces=function(){$("#error-space").hide();$("#error-description").text("");$("#success-space").hide();$("#success-description").text("")};setNewBadgeCounter=function(a){if(a==0){$("#header_user").next().remove();$("#header_notifications").next().next().remove();$("#header_notifications_new").next().next().remove()}else{$("#header_user").next().text(a);$("#header_notifications").next().next().text(a);$("#header_notifications_new").next().next().text(a)}$("#unread_counter").text(" "+a+" ")};sendAjaxForReadMessage=function(d,c){hideInfoSpaces();$.ajax({url:"ajax_notification_read",method:"POST",data:{id:d},dataType:"json"}).done(function b(f){var h=$.parseJSON(f);if(h.error.length>0){$("#error-space").fadeIn();$("#error-description").text(h.error)}else{var g=$(c).text().replace("* ",""),e=$("<span>").addClass("text-primary").text($(c).text().replace("* ",""));$(c).empty().html(e);$("#collapse"+d).addClass("in");setNewBadgeCounter(h.unread_messages)}}).fail(function a(){$("#error-space").fadeIn();$("#error-description").text("Requested failed")})};sendAjaxForDeleteMessage=function(c){hideInfoSpaces();$.ajax({url:"ajax_notification_delete",method:"POST",data:{id:c},dataType:"json"}).done(function b(d){var e=$.parseJSON(d);if(e.success.length>0){$("#"+c).remove();setNewBadgeCounter(e.unread_messages);$("#success-space").fadeIn();$("#success-description").text(e.success)}else{$("#error-space").fadeIn();$("#error-description").text(e.error)}}).fail(function a(){$("#error-space").fadeIn();$("#error-description").text("Requested failed")})};