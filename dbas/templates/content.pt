<!DOCTYPE html>
<html i18n:domain="dbas" metal:define-macro="layout">
<tal:block metal:use-macro="layout">
	<tal:block metal:fill-slot="content_page">

		<head>
			<link type="text/css" href="${request.static_url('dbas:static/css/theme_basetemplate.css')}" rel="stylesheet">
			<link type="text/css" href="${request.static_url('dbas:static/css/theme_content.css')}" rel="stylesheet">
		</head>

		<div class="container first-container colored_container" tal:condition="extras.logged_in">
			<div class="row">
				<div class="col-md-12">
					<ol class="breadcrumb" id="navigation-breadcrumb" style="background: #fff; margin-bottom: 0;">
						<li tal:repeat="breadcrumb extras.breadcrumbs">
							<a href="" tal:attributes="href breadcrumb.url; title breadcrumb.text" tal:condition="not:repeat.breadcrumb.end"><span tal:replace="breadcrumb.shorttext">weee :)</span></a>
							<span tal:replace="breadcrumb.text" tal:condition="repeat.breadcrumb.end">weee :)</span>
						</li>
					</ol>
				</div>
			</div>
		</div>

		<div class="container colored_container">
			<div class="row">
				<div class="col-md-7 center text-center">
					<p i18n:translate="current_discussion">Current discussion is about</p>
					<h5 id="issue_info">${issues.info}</h5>
				</div>
				<div class="col-md-5 center text-center">
					<span i18n:translate="startet_at">The discussion was started at</span>
					<span id="issue-date" class="text-info">${issues.date}</span>
					<br>
					<span i18n:translate="already_has">and already has</span>
					<span id="issue-count" class="text-info">${issues.arg_count}</span>
					<span i18n:translate="arguments">arguments</span>.
					<br>
					<div class="dropdown">
						<button class="btn btn-primary dropdown-toggle" type="button" id="issue-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
							<span tal:replace="issues.title"></span>&#160;&#160;&#160;<span class="caret"></span>
						</button>
						<ul class="dropdown-menu" id="dropdown-issue-list" aria-labelledby="issue-dropdown">
							<li class="dropdown-header" i18n:translate="topics">Topics</li>
							<li tal:repeat="issue issues.all" tal:attributes="class issue.enabled">
								<a href="#" tal:attributes="href issue.url; value issue.title"><span tal:replace="issue.title"></span><span class="badge" style="float: right"><span tal:replace="issue.arg_count"></span></span></a>
							</li>
						</ul>
					</div>
					<br>
					<button id="discussion-restart-btn" class="button button-block btn btn-primary" data-dismiss="modal" style="margin-bottom: 5px;" type="button" onclick="" tal:attributes="onclick extras.restart_url">
						<span i18n:translate="restart_discussion">Restart Discussion</span>
					</button>
				</div>
			</div>
		</div>

		<div class="container colored_container" id="discussion-container">
			<input type="hidden" id="hidden_csrf_token" name="csrf_token" value="${request.session.get_csrf_token()}">
			<div class="row">
				<div class="col-md-1">
					<div id="argument-blogging-sidebar">
						<a class="share-icon share-def" id="share-url" title="Share your url"></a>
					</div>
				</div>
				<div class="col-md-9">

					<div id="discussion-error-description-space" class="alert alert-danger alert-dismissible" style="display: none;">
						<button type="button" class="close" data-dismiss="alert" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<span id="discussion-error-description"></span>
					</div>

					<div id="discussion-success-description-space" class="alert alert-success alert-dismissible" style="display: none;">
						<button type="button" class="close" data-dismiss="alert" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<strong i18n:translate="success">Success</strong>
						<span id="discussion-success-description"></span>
					</div>

					<h4 id="discussions-header">${discussion.heading}</h4>
					<div id="discussions-space">

						<ul>
							<li tal:repeat="item items">
								<input id="tmp" type="radio" name="discussion-button-group" onclick="" tal:attributes="id item.id; onclick item.url">
								<span tal:repeat="premise item.premises" tal:omit-tag=""><label for="tmp" tal:attributes="for item.id; id premise.id">${premise.title}</label><label tal:attributes="for item.id" tal:condition="not:repeat.premise.end">&nbsp;<em i18n:translate="and">and</em></label></span>
							</li>
						</ul>

					</div>
				</div>

				<div class="col-md-2">
					<div id="discussion-sidebar">
                        <span tal:condition="extras.is_editable" style="display:none; float: left; width: 72px; text-align: center;">${extras.button.edit_statement}</span>
						<img tal:condition="extras.is_editable" id="edit-statement" class="icon-badge" alt="icon-pencil" src="${request.static_url('dbas:static/images/icon_pencil.png')}" tal:attributes="title extras.button.edit_statement; value extras.button.edit_statement" />
						<br tal:condition="extras.is_editable">
                        <span tal:condition="extras.is_reportable" style="display:none; float: left; width: 72px; text-align: center;">${extras.button.report_title}</span>
						<img tal:condition="extras.is_reportable" id="report-button" class="icon-badge" alt="icon-report" src="${request.static_url('dbas:static/images/icon_report.png')}" tal:attributes="value extras.button.report; title extras.button.report_title" />
						<div id="display-style-menu-icon" tal:condition="extras.show_display_style or extras.show_bar_icon">
                            <span tal:condition="extras.show_display_style or extras.show_bar_icon"  style="display:none; float: left; width: 72px; text-align: center;">${extras.button.more_title}</span>
							<img id="more-statement" class="icon-badge" src="${request.static_url('dbas:static/images/icon_simple.png')}" title="" tal:attributes="title extras.button.more_title"/>
							<nav id="site-navigation">
								<div class="display-style-menu" tal:condition="extras.show_bar_icon">
									<div>
										<span i18n:translate="opinion_barometer">Opinion<br>Barometer</span>
									</div>
									<img id="opinion-barometer-img" class="icon-badge" alt="icon-bars" tal:attributes="title extras.title.barometer" src="${request.static_url('dbas:static/images/icon_bars.png')}" title="" />
								</div>

								<div class="display-style-menu" id="display-style-icon-guided" tal:condition="extras.show_display_style">
									<div>
										<span i18n:translate="dialog_view">Dialog<br>View</span>
									</div>
									<img id="display-style-icon-guided-img" class="icon-badge" alt="icon-guided" tal:attributes="title extras.title.guided_view" src="${request.static_url('dbas:static/images/icon_guided.png')}" title="" />
								</div>

								<div class="display-style-menu" id="display-style-icon-island" tal:condition="extras.show_display_style">
									<div>
										<span i18n:translate="island_view">Island<br>View</span>
									</div>
									<img id="display-style-icon-island-img" class="icon-badge" alt="icon-island" tal:attributes="title extras.title.island_view" src="${request.static_url('dbas:static/images/icon_island.png')}" title="" />
								</div>

								<div class="display-style-menu" id="display-style-icon-expert" tal:condition="extras.show_display_style">
									<div>
										<span i18n:translate="complete_view">Complete<br>View</span>
									</div>
									<img id="display-style-icon-expert-img" class="icon-badge" alt="icon-expert" tal:attributes="title extras.title.expert_view" src="${request.static_url('dbas:static/images/icon_expert.png')}" title="" />
								</div>
							</nav>
						</div>

					</div>
				</div>
			</div>

			<div class="row" id="discussion-failure-row" style="display:none">
				<div class="col-md-3"></div>
				<div class="col-md-6">
					<button id="close-statement-container" type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="$(this).parent().hide();">
						<span aria-hidden="true" style="color: white;">&times;</span>
					</button>
					<div class="alert alert-danger" role="alert">
						<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
						<span i18n:translate="error">Error:</span>
						<span id="discussion-failure-msg"></span>
					</div>
					<div class="col-md-3"></div>
				</div>
			</div>
		</div>

		<div class="container colored_container" id="island-view-container" style="display:none" tal:condition="extras.show_display_style">
			<button id="close-island-view-container" type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
			<div class="row" id="island-view-container-space">
				<div class="col-md-2"></div>
				<div class="col-md-8 text-center">
					<h4>Island View for <strong>this is not true for overbred races does not hold, because even overbred races can be taught.</strong>
					</h4>
				</div>
				<div class="col-md-2"></div>
			</div>

			<div class="row">
				<div class="col-md-6">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h5>
									<span class="text-danger">✗</span>
									<span tal:replace="extras.island.undermine_text">undermine_text</span>
								</h5>
						</div>
						<div class="panel-body">
							<ul>
								<li tal:repeat="undermine extras.island.undermine" tal:attributes="id undermine.id">
									<label tal:attributes="for undermine.id">${undermine.text}</label>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<div class="col-md-6">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h5>
									<span class="text-success">✓</span> 
									<span tal:replace="extras.island.support_text">support_text</span>
								</h5>
						</div>
						<div class="panel-body">
							<ul>
								<li tal:repeat="support extras.island.support" tal:attributes="id support.id">
									<label tal:attributes="for support.id">${support.text}</label>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-6">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h5>
                                    <span class="text-danger">✗</span>
                                    <span tal:replace="extras.island.undercut_text">undercut_text</span>
							    </h5>
						</div>
						<div class="panel-body">
							<ul>
								<li tal:repeat="undercut extras.island.undercut" tal:attributes="id undercut.id">
									<label tal:attributes="for undercut.id">${undercut.text}</label>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<div class="col-md-6">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h5>
									<span class="text-success">✓</span> 
									<span tal:replace="extras.island.overbid_text">overbid_text</span>
								</h5>
						</div>
						<div class="panel-body">
							<ul>
								<li tal:repeat="overbid extras.island.overbid" tal:attributes="id overbid.id">
									<label tal:attributes="for overbid.id">${overbid.text}</label>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h5>
									<span class="text-danger">✗</span>
									<span tal:replace="extras.island.rebut_text">rebut_text</span>
								</h5>
						</div>
						<div class="panel-body">
							<ul>
								<li tal:repeat="rebut extras.island.rebut" tal:attributes="id rebut.id">
									<label tal:attributes="for rebut.id">${rebut.text}</label>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>

			<div class="center text-center">
				<button id="island-view-add-arguments" type="button" class="button button-block btn btn-primary disabled" data-dismiss="modal">
					<span i18n:translate="add_statement">Add statement</span>
				</button>
			</div>

		</div>

		<div class="container colored_container" id="graph-view-container" style="display:none">
			<button id="close-graph-view-container" type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
			<div id="graph-view-container-space"></div>
		</div>

		<div class="container colored_container" id="add-statement-container" style="display:none" tal:attributes="style extras.add_statement_container_style">
			<button id="close-statement-container" type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
			<div class="col-md-12">
				<h4><span i18n:translate="what_is_your_idea">What is your idea? What should we do?</span></h4>
				<div id="add-statement-error-container" class="alert alert-danger" role="alert" style="display:none">
					<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
					<span i18n:translate="error:">Error:</span>
					<span id="add-statement-error-msg"></span>
				</div>
				<div id="add-statement-container-body">
					<input id="add-statement-container-main-input" type="text" class="add-statement-container-input form-control" name="" autocomplete="off" placeholder="example: We should build a new opera house" value="" />
				</div>
				<div class="list-group" id="proposal-statement-list-group"></div>
				<input id="send-new-statement" type="button" name="" value="Save my Statement!" class="button button-block btn-lg btn btn-primary" data-dismiss="modal" title="Saving the data." tal:attributes="value extras.button.save_my_statement"/>
			</div>
		</div>

		<div class="container colored_container" id="add-premise-container" style="display:none" tal:attributes="style extras.add_premise_container_style">
			<button id="close-premise-container" type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
			<div class="col-md-12 text-center">
				<h4>
					<span i18n:translate="let_me_enter_my_reason">
						Let me enter my reason!
					</span>
				</h4>
				<div id="add-premisen-error-container" class="alert alert-danger" role="alert" style="display:none">
					<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
					<span i18n:translate="error:">Error:</span>
					<span id="add-premise-error-msg"></span>
				</div>
				<h5>
					<span tal:condition="extras.add_premise_supportive"><span i18n:translate="I">I</span> <span class="text-success" i18n:translate="agree">agree</span> <span i18n:translate="with">with</span>: </span>
					<span tal:condition="not:extras.add_premise_supportive"><span i18n:translate="I">I</span> <span class="text-danger" i18n:translate="disagree">disagree</span> <span i18n:translate="with">with</span>: </span>
					<span id="add-premise-container-main-input-intro">${discussion.add_premise_text}</span>
				</h5>
				<div id="add-premise-container-body">
					<div style="padding-bottom: 2em;">
						<h5 style="float: left; line-height: 20px; text-align: center;" i18n:translate="Because...">Because...</h5>
						<input id="add-premise-container-main-input" type="text" class="add-premise-container-input form-control" name="" autocomplete="off" placeholder="example: There is some reason!" value="">
						<img class="icon-badge icon-rem-premise"
								 alt="icon-rem"
								 src="${request.static_url('dbas:static/images/icon_minus2.png')}"
								 style="height: 30px; display:none; padding-right: 0.5em;"
								 tal:attributes="title extras.button.add_statement_row_title"/>
						<img class="icon-badge icon-add-premise"
								 alt="icon-add"
								 src="${request.static_url('dbas:static/images/icon_plus2.png')}"
								 style="height: 30px;"
								 tal:attributes="title extras.button.rem_statement_row_title"/>
					</div>
				</div>
				<div class="list-group" id="proposal-premise-list-group"></div>
				<input id="send-new-premise" type="button" name="" value="Save my Statement!" class="button button-block btn-lg btn btn-primary" data-dismiss="modal" title="Saving the data." tal:attributes="value extras.button.save_my_statement"/>
			</div>
		</div>

		<div class="container colored_container" id="display-control-container" tal:condition="extras.show_display_style" style="display:none">
			<div class="row">
				<h4 i18n:translate="change_style">Change display style</h4>
				<div class="col-md-4">
					<input type="radio" id="sc-style-1" checked value="Dialog View">
					<label id="label-sc-style-1" for="sc-style-1" data-value="Dialog View" i18n:translate="dialog_view">Dialog View </label>
					<br>
					<img id="display-control-container-icon-guided" class="icon-badge" alt="icon-guided" src="${request.static_url('dbas:static/images/icon_guided.png')}" />
				</div>
				<div class="col-md-4">
					<input type="radio" id="sc-style-2" value="Island View">
					<label id="label-sc-style-2" for="sc-style-2" data-value="Island View" i18n:translate="island_view">Island View</label>
					<br>
					<img id="display-control-container-icon-island" class="icon-badge" alt="icon-island" src="${request.static_url('dbas:static/images/icon_island.png')}" />
				</div>
				<div class="col-md-4">
					<input type="radio" id="sc-style-3" value="Complete View">
					<label id="label-sc-style-3" for="sc-style-3" data-value="Complete View" i18n:translate="complete_view">Complete View</label>
					<br>
					<img id="display-control-container-icon-expert" class="icon-badge" alt="icon-expert" src="${request.static_url('dbas:static/images/icon_expert.png')}" />
				</div>
			</div>
		</div>


		<script type="text/javascript" src="${request.static_url('dbas:static/js/discussion-guihandler.js')}"></script>
		<script type="text/javascript" src="${request.static_url('dbas:static/js/discussion-interactionhandler.js')}"></script>
		<script type="text/javascript" src="${request.static_url('dbas:static/js/discussion-ajaxhandler.js')}"></script>
		<script type="text/javascript" src="${request.static_url('dbas:static/js/discussion-helper.js')}"></script>
		<script type="text/javascript" src="${request.static_url('dbas:static/js/discussion-main.js')}"></script>

		<script type="text/javascript" src="${request.static_url('dbas:static/js/discussion-graph.js')}"></script>
		<script type="text/javascript" src="${request.static_url('dbas:static/js/discussion-barometer.js')}"></script>

	</tal:block>
</tal:block>

</html>