<!DOCTYPE html>
<html lang="${request.locale_name}" metal:use-macro="load: basetemplate.pt" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" xmlns:i18n="http://xml.zope.org/namespaces/i18n" i18n:domain="dbas">

<head>
	<link type="text/css" href="${request.static_url('dbas:static/css/theme_basetemplate.css')}" rel="stylesheet">
	<link type="text/css" href="${request.static_url('dbas:static/css/theme_form.css')}" rel="stylesheet">
	<link type="text/css" href="${request.static_url('dbas:static/css/theme_settings.css')}" rel="stylesheet">
</head>

<body>


	<div class="form first" id="firstcontainer">
		<div class="row">
			<h1><span class="font-semi-bold">Settings of: </span><span tal:replace="logged_in"/></h1>
		</div>
	</div>

	<div class="container settings-container">
		<h2>Information about yourself</h2>
		<table id="info-table" class="table table-condensed" border="0" style="border-collapse: separate; border-spacing: 5px 5px;">
			<tr>
				<td>
					<spand class="font-semi-bold">Firstname</spand>
				</td>
				<td><span tal:replace="db_firstname" />
				</td>
			</tr>
			<tr>
				<td>
					<spand class="font-semi-bold">Surname</spand>
				</td>
				<td><span tal:replace="db_surname" />
				</td>
			</tr>
			<tr>
				<td>
					<spand class="font-semi-bold">Nickname</spand>
				</td>
				<td id='table_nickname'><span tal:replace="db_nickname" />
				</td>
			</tr>
			<tr>
				<td>
					<spand class="font-semi-bold">E-Mail</spand>
				</td>
				<td><span tal:replace="db_mail" />
				</td>
			</tr>
			<tr>
				<td>
					<spand class="font-semi-bold">Group</spand>
				</td>
				<td><span tal:replace="db_group" />
				</td>
			</tr>
		</table>
	</div>

	<div class="container settings-container">
		<h2>Tracked user decisions</h2>
		<div id="track-table-space">
			<table id="track-table" class="table table-condensed" border="0" style="border-collapse: separate; border-spacing: 5px 5px;">
				<tr>
				</tr>
			</table>
		</div>
		<input id="request-track" type="button" value="Request track" class="button button-block btn btn-primary" data-dismiss="modal" />
		<input id="delete-track" type="button" value="Delete track" class="button button-block btn btn-primary" data-dismiss="modal" />
		<div id="track-table-success" class="alert alert-success" role="alert">
			<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
			<span class="sr-only">Success:</span>
			<p id="track-success-msg"></p>
		</div>

		<div id="track-table-failure" class="alert alert-danger" role="alert">
			<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
			<span class="sr-only">Error:</span>
			<p id="track-failure-msg"></p>
		</div>
	</div>

	<div class="form" id="password-form">
		<h2>Change your password</h2>
		<form action="/settings" method="post">

			<h3>Old password</h3>
			<input id="password-old-input" type="password" name="passwordold" class="passwordold" autocomplete="off" placeholder="example: ******" value="${passwordold}">


			<h3>New Password</h3>
			<input id="password-input" type="password" name="password" class="password" autocomplete="off" placeholder="example: ******" value="${password}">
			<div id="password-extras">
				<div id="password-meter" class="veryweak"></div>
				<h4 id="password-strength">Strength</h4>
				<a id="password-info-link" href="" data-toggle="modal" data-target="#popup_password_info" title="Show Password Information">
					<i id="password-info-icon" aria-hidden="true" class="glyphicon glyphicon-question-sign">&#160;</i>
				</a>
			</div>

			<h3>New Password (confirm)</h3>
			<input id="passwordconfirm-input" type="password" name="passwordconfirm" class="password" autocomplete="off" placeholder="example: ******" value="${passwordconfirm}">


			<div tal:condition="change_error" id="danger-message" class="alert alert-danger alert-dismissible">
				<button type="button" class="close" data-dismiss="alert" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
				<div id="danger-message-text"><span tal:replace="message" />
				</div>
			</div>

			<div tal:condition="change_success" class="alert alert-success" role="alert">
				<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
				<span class="sr-only">Great:</span> Your password was changed.
			</div>

			<input id="password-submit" type="submit" name="form.passwordchange.submitted" value="Change password" class="button button-block btn-lg btn btn-primary" data-dismiss="modal" />
		</form>
	</div>


	<div metal:use-macro="load: snippet-footer.pt" />

	<script type="text/javascript" src="${request.static_url('dbas:static/js/password-handler.js')}"></script>
	<script type="text/javascript" src="${request.static_url('dbas:static/js/settings.js')}"></script>
</body>
<html>