<tal:block metal:use-macro="layout" i18n:domain="dbas" metal:define-macro="layout">
	<tal:block metal:fill-slot="content_page">

		<head>
			<link type="text/css" href="${request.static_url('dbas:static/css/theme_settings.css')}" rel="stylesheet">
		</head>

		<input type="hidden" id="hidden_csrf_token" name="csrf_token" value="${request.session.get_csrf_token()}">

		<div class="container colored-container" id="first-settings-container">
			<div class="row" style="margin: 1em;">
				<div class="col-md-7">
					<h4><span class="glyphicon glyphicon-user" aria-hidden="true" style="margin-right: 0.5em;"></span><span i18n:translate="personal_information">Personal Information</span></h4>
					<table id="info-table" class="table table-condensed" border="0" style="border-collapse: separate; border-spacing: 5px 5px;">
						<tr>
							<td><span class="lead" i18n:translate="firstname">Firstname</span></td>
							<td>${settings.db_firstname}</td>
						</tr>
						<tr>
							<td><span class="lead" i18n:translate="surname">Surname</span></td>
							<td>${settings.db_surname}</td>
						</tr>
						<tr>
							<td><span class="lead" i18n:translate="nickname">Nickname</span></td>
							<td id='table_nickname'>${settings.db_nickname}</td>
						</tr>
						<tr>
							<td><span class="lead" i18n:translate="public_nickname">Public Nickname</span></td>
							<td id="value_public_nickname">${settings.db_public_nickname}</td>
						</tr>
						<tr>
							<td><span class="lead">E-Mail</span></td>
							<td>${settings.db_mail}</td>
						</tr>
						<tr>
							<td><span class="lead" i18n:translate="group">Group</span></td>
							<td>${settings.db_group}</td>
						</tr>
					</table>
                    <a id="value_public_page" href="#" tal:attributes="href settings.public_page_url" i18n:translate="click_here_for_public_page">Click here for your public page</a>
				</div>
				<div class="col-md-5">
					<h4><span class="glyphicon glyphicon-cog" aria-hidden="true" style="margin-right: 0.5em;"></span><span i18n:translate="settings">Settings</span></h4>
					<table id="info-table" class="table table-condensed" border="0" style="border-collapse: separate; border-spacing: 5px 5px;">
						<tr>
							<td><span i18n:translate="receive_notifications" class="lead">Receive Notifications</span><span class="glyphicon glyphicon-question-sign" aria-hidden="true" style="margin-left: 0.5em;" data-toggle="tooltip" data-placement="bottom" tal:attributes="title settings.title_notifications"></span></td>
							<td class="text-center">
								<input id="receive-notifications-toggle" type="checkbox" data-toggle="toggle" data-size="small" title="" data-onstyle="success" data-offstyle="danger" tal:attributes="checked settings.send_notifications">
							</td>
						</tr>
						<tr>
							<td><span i18n:translate="receive_mails" class="lead">Receive E-Mails</span><span class="glyphicon glyphicon-question-sign" aria-hidden="true" style="margin-left: 0.5em;" data-toggle="tooltip" data-placement="bottom" tal:attributes="title settings.title_mails"></span></td>
							<td class="text-center">
								<input id="receive-mails-toggle" type="checkbox" data-toggle="toggle" data-size="small" title="" data-onstyle="success" data-offstyle="danger" tal:attributes="checked settings.send_mails">
							</td>
						</tr>
						<tr>
							<td><span i18n:translate="nickname_is_public" class="lead">Nickname is public</span><span class="glyphicon glyphicon-question-sign" aria-hidden="true" style="margin-left: 0.5em;" data-toggle="tooltip" data-placement="bottom" tal:attributes="title settings.title_public_nick"></span></td>
							<td class="text-center">
								<input id="public-nick-toggle" type="checkbox" data-toggle="toggle" data-size="small" title="" data-onstyle="success" data-offstyle="danger" tal:attributes="checked settings.public_nick">
							</td>
						</tr>
					</table>
					<div>
                        <div class="center text-center" style="float:left; margin: 2em;">
						    <img src="https://secure.gravatar.com/avatar/00000000000000000000000000000000?d=mm&f=y" tal:attributes="src settings.avatar_url">
						    <br>
						    <span i18n:translate="profile_picture">Profile Picture</span>
                        </div>
                        <span i18n:translate="change_gravatar">Change your profile picture on the</span>
                        <a style="color: #2196f3;" href="https://en.gravatar.com/site/login">Gravatar-Website</a>.
                        <span i18n:translate="what_is_gravatar">A Gravatar is a Globally Recognized Avatar. You upload it and create your profile just once, and then when you participate in any Gravatar-enabled site, your Gravatar image will automatically follow you there.</span>
					</div>
				</div>
                </div>
            <div class="row">
				<div class="col-md-12">
					<div id="settings-alert" class="alert alert-dismissible alert-danger" style="display: none;">
						<button type="button" class="close" data-dismiss="alert">&times;</button>
						<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
						<span id="settings-alert-message" i18n:translate="settings_not_set">Settings could not be set. Please try again later.</span>
					</div>
					<div id="settings-success" class="alert alert-dismissible alert-success" style="display: none;">
						<button type="button" class="close" data-dismiss="alert">&times;</button>
						<span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
						<span id="settings-success-message" i18n:translate="settings_set">Settings were set successfully.</span>
					</div>
				</div>
			</div>
		</div>

		<div class="container colored-container">
			<div class="content row">
				<div class="col-md-7">
					<h4><span class="glyphicon glyphicon-asterisk" aria-hidden="true" style="margin-right: 0.5em;"></span><span i18n:translate="change_password">Change your password</span></h4>
					<form action="/settings" method="post">

						<div class="form-group">
							<label for="settings-password-old-input" class="col-md-5 control-label lead" i18n:translate="old_password">Old password</label>
							<div class="col-md-7">
								<input class="form-control passwordold" id="settings-password-old-input" type="password" name="passwordold" autocomplete="off" placeholder="example: ******" value="${settings.passwordold}">
							</div>
						</div>

						<div class="form-group">
							<label for="settings-password-input" class="col-md-5 control-label lead" i18n:translate="new_password">New Password</label>
							<div class="col-md-7">
								<input class="form-control password" id="settings-password-input" type="password" name="password" autocomplete="off" placeholder="example: ******" value="${settings.password}">
							</div>

							<div id="settings-password-extras" style="display: none;">
								<div id="settings-password-meter" class="veryweak"></div>
								<h5 id="settings-password-strength" i18n:translate="strength">Strength</h5>
								<a id="settings-password-info-link" href="" data-toggle="modal" data-toggle="tooltip" data-placement="bottom" data-target="#popup_password_info" title="Show Password Information">
									<i id="settings-password-info-icon" aria-hidden="true" class="glyphicon glyphicon-question-sign">&#160;</i>
								</a>
							</div>
						</div>

						<div class="form-group">
							<p class="col-md-5 control-label lead" i18n:translate="new_password_confirm">New Password (confirm)</p>
							<div class="col-md-7">
								<input class="form-control password" id="settings-passwordconfirm-input" type="password" name="passwordconfirm" autocomplete="off" placeholder="example: ******" value="${settings.passwordconfirm}">
							</div>
						</div>

						<div class="col-md-12" tal:condition="settings.change_error">
							<div id="settings-danger-message" class="alert alert-danger alert-dismissible">
								<button type="button" class="close" data-dismiss="alert" aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
								<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>${settings.message}
							</div>
						</div>
						<input id="settings-password-submit" type="submit" style="display: block; margin: 0 auto;" name="form.passwordchange.submitted" value="Change password" class="button button-block btn btn-primary" data-dismiss="modal" tal:attributes="value extras.buttons.password_submit" />
					</form>
				</div>

				<div class="col-md-5">
					<h4><span class="glyphicon glyphicon-stats" aria-hidden="true" style="margin-right: 0.5em;"></span><span i18n:translate="discussion_stat">Discussion Statistics</span></h4>
					<table class="table table-condensed" border="0" style="border-collapse: separate; border-spacing: 5px 5px;">
						<tr>
							<td>
								<span class="lead" i18n:translate="statements_posted">Statements posted</span>
								<a href="#"><span id="info-statements" class="glyphicon glyphicon-info-sign"></span></a>
							</td>
							<td id="statements-done-count" style="text-align: right">${settings.statemens_posted}</td>
						</tr>
						<tr>
							<td>
								<span class="lead" i18n:translate="edits_done">Edits done</span>
								<a href="#"><span id="info-edits" class="glyphicon glyphicon-info-sign"></span></a>
							</td>
							<td id="edits-done-count" style="text-align: right">${settings.edits_done}</td>
						</tr>
						<tr>
							<td>
								<span class="lead" i18n:translate="discussion_votes_statements">Votes for Arguments</span>
								<a href="#"><span id="info-vote-arguments" class="glyphicon glyphicon-info-sign"></span></a>
							</td>
							<td id="discussion-arg-votes-count" style="text-align: right">${settings.discussion_arg_votes}</td>
						</tr>
						<tr>
							<td>
								<span class="lead" i18n:translate="discussion_votes_arguments">Votes for Statements</span>
								<a href="#"><span id="info-vote-statements" class="glyphicon glyphicon-info-sign"></span></a>
							</td>
							<td id="discussion-stat-votes-count" style="text-align: right">${settings.discussion_stat_votes}</td>
						</tr>
					</table>
					<div class="text-center">
						<input id="clear-statistics" type="button" value="Request history" class="button button-block btn btn-primary" style="display: inline-block;" tal:attributes="value extras.buttons.clear_statistics" />
					</div>
				</div>
			</div>

			<div tal:condition="settings.change_success" id="settings-success-message" class="alert alert-success" class="col-md-12">
				<button type="button" class="close" data-dismiss="alert">&times;</button>
				<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
				<span i18n:translate="password_changed">Your password was changed</span>.
			</div>
			
			<div class="col-md-12">
				<div id="statistics-alert" class="alert alert-dismissible alert-danger" style="display: none;">
					<button type="button" class="close" data-dismiss="alert">&times;</button>
					<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
					<span id="statistics-alert-message" i18n:translate="statistics_not_deleted">Statistics could not be deleted.</span>

				</div>
				<div id="statistics-success" class="alert alert-dismissible alert-success" style="display: none;">
					<button type="button" class="close" data-dismiss="alert">&times;</button>
					<span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
					<span id="statistics-success-message" i18n:translate="statistics_deletet">Statistics were set successfully deleted.</span>

				</div>

			</div>
		</div>

		<div class="container colored-container">
			<div class="content row">
				<div class="col-md-12">
					<h4><span class="glyphicon glyphicon-time" aria-hidden="true" style="margin-right: 0.5em;"></span><span i18n:translate="history">Your last history</span></h4>

					<div style="text-align:center;">
						<input id="request-history" type="button" value="Request history" class="button button-block btn btn-primary" style="display: inline-block;" tal:attributes="value extras.buttons.request_history" />
						<input id="delete-history" type="button" value="Delete history" class="button button-block btn btn-primary" style="display: inline-block;" tal:attributes="value extras.buttons.delete_history" />
					</div>

					<div id="history-table-success" class="alert alert-success" role="alert" style="display: none;">
						<button type="button" class="close" data-dismiss="alert" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
						<span class="lead" i18n:translate="success" style="color: white;">Success:</span>
						<span id="history-success-msg"></span>
					</div>

					<div id="history-table-failure" class="alert alert-danger" role="alert" style="display: none; padding: 1em;">
						<button type="button" class="close" data-dismiss="alert" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
						<span id="history-failure-msg"></span>
					</div>

					<div id="history-table-space">
						<table id="history-table" class="table table-condensed" border="0" style="border-collapse: separate; border-spacing: 5px 5px;">
							<tr>
							</tr>
						</table>
					</div>
				</div>
			</div>
		</div>

	</tal:block>
</tal:block>