

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Frontend Structure &mdash; D-BAS 1.3.4 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="D-BAS 1.3.4 documentation" href="../index.html"/>
        <link rel="up" title="Architecture" href="index.html"/>
        <link rel="next" title="Backend Structure" href="backend_structure.html"/>
        <link rel="prev" title="Software Stack" href="overview.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> D-BAS
          

          
          </a>

          
            
            
              <div class="version">
                1.3.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Architecture</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Software Stack</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Frontend Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-systems">Module Systems</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#typescript-modules">TypeScript Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#angular-modules">Angular Modules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#how-we-use-it">How we use it</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#packages">Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#resources">Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adapters">Adapters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#applications">Applications</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#further-reading">Further Reading</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="backend_structure.html">Backend Structure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../views/index.html">Views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datastructure/index.html">Datastrucutres</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notices.html">Notices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">D-BAS</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Architecture</a> &raquo;</li>
      
    <li>Frontend Structure</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/architecture/frontend_structure.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="frontend-structure">
<h1>Frontend Structure<a class="headerlink" href="#frontend-structure" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-systems">
<h2>Module Systems<a class="headerlink" href="#module-systems" title="Permalink to this headline">¶</a></h2>
<p>The adhocracy frontend is based mainly on two technologies: TypeScript
and angular.js. Both have their own module system. These two systems
are very different.</p>
<div class="section" id="typescript-modules">
<h3>TypeScript Modules<a class="headerlink" href="#typescript-modules" title="Permalink to this headline">¶</a></h3>
<p>In TypeScript, each file is a module (TypeScript does in fact offer two
module systems. We use <a class="reference external" href="http://www.typescriptlang.org/Handbook#modules-going-external">external modules</a>).
A module <code class="docutils literal"><span class="pre">example.ts</span></code> can be imported like this:</p>
<div class="highlight-python"><div class="highlight"><pre>import Example = require(&quot;./example&quot;);
</pre></div>
</div>
<p>Static imports have the benefit of allowing to check for the existence
of modules and for circular imports at compile time. But be aware that
this is only true if you actually use the module for more than
type-checking. If not, the import will be stripped after that step and
no further checks will be done.</p>
<p>An important bit is that these imports are responsible for actually
loading the required files in the browser. Without a non-stripped
import, the module will just not be available.</p>
</div>
<div class="section" id="angular-modules">
<h3>Angular Modules<a class="headerlink" href="#angular-modules" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://docs.angularjs.org/guide/module">Angular modules</a> are the
place where services, directives and filters are registered. When a
module depends on another one that means that it imports all of its
services, directives and filters.</p>
<p>A module <code class="docutils literal"><span class="pre">example</span></code> that depends on module <code class="docutils literal"><span class="pre">dependency</span></code> is created
like this:</p>
<div class="highlight-python"><div class="highlight"><pre>var exampleModule = angular.module(&quot;example&quot;, [&quot;dependency&quot;]);
</pre></div>
</div>
<p>This mechanism happens at runtime and therefore missing dependencies and
circular imports can only be detected at runtime.</p>
</div>
</div>
<div class="section" id="how-we-use-it">
<h2>How we use it<a class="headerlink" href="#how-we-use-it" title="Permalink to this headline">¶</a></h2>
<div class="section" id="packages">
<h3>Packages<a class="headerlink" href="#packages" title="Permalink to this headline">¶</a></h3>
<p>In adhocracy we create what we call a <em>package</em> for every reusable
feature. A package may contain services, directives and filters. Each
package has its own folder in <code class="docutils literal"><span class="pre">Packages/</span></code>.</p>
<p>A package may contain arbitrary TypeScript modules. But it is always
required to contain a TypeScript module with the same name as the
package. This TypeScript module wires all contents of the package into
an angular module.</p>
<p>This angular module is exposed by a variable <code class="docutils literal"><span class="pre">moduleName</span></code> and a
function <code class="docutils literal"><span class="pre">register</span></code>. <code class="docutils literal"><span class="pre">moduleName</span></code> contains the name that should be
used for this module. By convention the module name is the package name
in camel case prefixed with &#8216;adh&#8217;.  <code class="docutils literal"><span class="pre">register</span></code> takes angular as a
first argument and registers the module with all of its services and
directives.</p>
<p>A package must not directly use TypeScript modules from other Packages.
When you want to actually use the code from other packages, you must
import the corresponding angular module referenced by the TypeScript
module&#8217;s <code class="docutils literal"><span class="pre">moduleName</span></code> variable. This way it is also made sure that
requirejs will actually load the code.</p>
</div>
<div class="section" id="resources">
<h3>Resources<a class="headerlink" href="#resources" title="Permalink to this headline">¶</a></h3>
<p>The backend defines a set of resource and sheet types and exposes them
in a meta API. Matching TypeScript classes can be generated using a
script. Because we need a running backend to generate that code it is
checked into version control.</p>
<p>The resource definitions exist in a top level folder called
<code class="docutils literal"><span class="pre">Resources/</span></code>.</p>
</div>
<div class="section" id="adapters">
<h3>Adapters<a class="headerlink" href="#adapters" title="Permalink to this headline">¶</a></h3>
<p>The concept of adapters is outlined in <code class="xref doc docutils literal"><span class="pre">generic_widgets</span></code>. They glue
together UI widgets with resource types. They are defined alongside the
generated resource code. So for a resource file <code class="docutils literal"><span class="pre">Proposal.ts</span></code> there is
a corresponding <code class="docutils literal"><span class="pre">ProposalAdapters.ts</span></code> that contains the adapters to
all widgets.</p>
</div>
<div class="section" id="applications">
<h3>Applications<a class="headerlink" href="#applications" title="Permalink to this headline">¶</a></h3>
<p>At the top level of the directory structure there are TypeScript modules
that define angular modules. These represent different applications. Each
application wires together everything that is required: Packages,
resources and adapters.</p>
<p>Application modules are also in charge of loading all required files. As
explained before, it is not sufficient to require the corresponding
TypeScript modules. You additionally need to use these modules, e.g. as
parameters to a dummy function like this:</p>
<div class="highlight-python"><div class="highlight"><pre>var forceLoad = (...args) =&gt; args;
</pre></div>
</div>
</div>
</div>
<div class="section" id="further-reading">
<h2>Further Reading<a class="headerlink" href="#further-reading" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://docs.google.com/document/d/1XXMvReO8-Awi1EZXAXS4PzDzdNvV6pGcuaF4Q9821Es/pub">Angular Best Practice for App Structure</a></li>
<li><a class="reference external" href="https://google-styleguide.googlecode.com/svn/trunk/angularjs-google-style.html">An AngularJS Style Guide for Closure Users at Google</a></li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="backend_structure.html" class="btn btn-neutral float-right" title="Backend Structure" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" class="btn btn-neutral" title="Software Stack" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Tobias Krauthoff.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.3.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>